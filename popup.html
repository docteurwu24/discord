<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <style>
        body {
            width: 380px;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #2f3136;
            color: #dcddde;
            margin: 0;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .header h1 {
            color: #5865f2;
            margin: 0;
            font-size: 20px;
        }
        
        .header .subtitle {
            font-size: 12px;
            color: #72767d;
            margin-top: 5px;
        }
        
        .section {
            background: #36393f;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .section h3 {
            margin: 0 0 10px 0;
            color: #5865f2;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-group {
            margin-bottom: 12px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 12px;
            color: #b9bbbe;
            font-weight: 500;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #40444b;
            border-radius: 4px;
            background: #40444b;
            color: #dcddde;
            font-size: 14px;
            box-sizing: border-box;
            font-family: inherit;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #5865f2;
            box-shadow: 0 0 0 2px rgba(88, 101, 242, 0.2);
        }
        
        .btn {
            background: #5865f2;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.2s;
        }
        
        .btn:hover {
            background: #4752c4;
        }
        
        .btn:disabled {
            background: #4f545c;
            cursor: not-allowed;
        }
        
        .btn-full {
            width: 100%;
        }
        
        .btn-secondary {
            background: #4f545c;
        }
        
        .btn-secondary:hover {
            background: #5d6269;
        }
        
        .btn-danger {
            background: #ed4245;
        }
        
        .btn-danger:hover {
            background: #c73e3e;
        }
        
        .btn-group {
            display: flex;
            gap: 8px;
        }
        
        .btn-group .btn {
            flex: 1;
        }
        
        .status {
            text-align: center;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status.success {
            background: #43b581;
            color: white;
        }
        
        .status.error {
            background: #ed4245;
            color: white;
        }
        
        .status.info {
            background: #5865f2;
            color: white;
        }
        
        .persona-selector {
            background: #40444b;
            border: 2px solid #5865f2;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 15px;
        }
        
        .persona-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .persona-info .emoji {
            font-size: 20px;
        }
        
        .persona-info .name {
            font-weight: 600;
            color: #5865f2;
        }
        
        .persona-prompt {
            background: #2f3136;
            padding: 8px;
            border-radius: 4px;
            font-size: 12px;
            color: #b9bbbe;
            font-style: italic;
            border-left: 3px solid #5865f2;
        }
        
        .textarea-counter {
            text-align: right;
            font-size: 11px;
            color: #72767d;
            margin-top: 5px;
        }
        
        .feature-list {
            font-size: 12px;
            color: #72767d;
            margin-top: 10px;
        }
        
        .feature-list li {
            margin-bottom: 5px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }
        
        .stat-box {
            background: #2f3136;
            padding: 8px;
            border-radius: 4px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: 600;
            color: #5865f2;
        }
        
        .stat-label {
            font-size: 11px;
            color: #72767d;
        }
        
        .api-warning {
            background: rgba(237, 66, 69, 0.1);
            border: 1px solid #ed4245;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 15px;
            font-size: 12px;
            color: #ed4245;
        }
        
        .success-indicator {
            background: rgba(67, 181, 129, 0.1);
            border: 1px solid #43b581;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 15px;
            font-size: 12px;
            color: #43b581;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ü§ñ Discord AI Assistant</h1>
        <div class="subtitle">Syst√®me de Personas Avanc√©</div>
        <div id="status" class="status" style="display: none;"></div>
    </div>

    <!-- Section API -->
    <div class="section">
        <h3>üîë Configuration API</h3>
        <div id="api-warning" class="api-warning" style="display: none;">
            <strong>‚ö†Ô∏è Cl√© API manquante</strong><br>
            Vous devez configurer votre cl√© API Google Gemini pour utiliser l'assistant.
        </div>
        <div id="api-success" class="success-indicator" style="display: none;">
            <strong>‚úÖ API configur√©e</strong><br>
            Votre cl√© API est sauvegard√©e et pr√™te √† √™tre utilis√©e.
        </div>
        <div class="form-group">
            <label>Cl√© API Google Gemini :</label>
            <input type="password" id="apiKey" placeholder="AIza..." />
            <div style="font-size: 11px; color: #72767d; margin-top: 5px;">
                üîí Sauvegard√©e automatiquement et de mani√®re s√©curis√©e
            </div>
        </div>
    </div>

    <!-- Section Persona Actuel -->
    <div class="section">
        <h3>üé≠ Persona Actuel</h3>
        <div id="current-persona" class="persona-selector">
            <div class="persona-info">
                <div class="emoji">ü§ñ</div>
                <div class="name">Chargement...</div>
            </div>
            <div class="persona-prompt">Chargement du persona...</div>
        </div>
        <div class="btn-group">
            <button class="btn" id="quick-switch">üîÑ Changer</button>
            <button class="btn btn-secondary" id="edit-persona">‚úèÔ∏è Modifier</button>
        </div>
    </div>

    <!-- Section Gestion des Personas -->
    <div class="section">
        <h3>üë• Gestion des Personas</h3>
        
        <div class="form-group">
            <label>S√©lectionner un persona :</label>
            <div style="display: flex; gap: 8px;">
                <select id="persona-select" style="flex: 1;">
                    <option value="">-- Nouveau Persona --</option>
                </select>
                <button class="btn btn-secondary" id="load-persona">üì• Charger</button>
            </div>
        </div>

        <div class="form-group">
            <label>Nom du persona :</label>
            <input type="text" id="persona-name" placeholder="Ex: üòé Ami D√©contract√©" maxlength="50" />
        </div>
        
        <div class="form-group">
            <label>Prompt du persona (description de la personnalit√©) :</label>
            <textarea id="persona-prompt" rows="4" placeholder="Ex: Tu es Spider-Man et tu r√©ponds de mani√®re d√©contract√©e et h√©ro√Øque. Tu fais des r√©f√©rences √† tes aventures et tu utilises des expressions comme 'Eh bien!', 'Avec de grands pouvoirs...', etc." maxlength="500"></textarea>
            <div class="textarea-counter">
                <span id="prompt-counter">0</span>/500 caract√®res
            </div>
        </div>

        <div class="btn-group">
            <button class="btn" id="save-persona">üíæ Sauvegarder</button>
            <button class="btn btn-secondary" id="new-persona">‚ú® Nouveau</button>
            <button class="btn btn-danger" id="delete-persona">üóëÔ∏è Supprimer</button>
        </div>
    </div>


    <!-- Section Statistiques d'Utilisation -->
    <div class="section">
        <h3>üìä Statistiques d'Utilisation</h3>
        <div class="stats-grid">
            <div class="stat-box">
                <div id="total-requests" class="stat-value">0</div>
                <div class="stat-label">Requ√™tes Totales</div>
            </div>
            <div class="stat-box">
                <div id="tokens-used" class="stat-value">0</div>
                <div class="stat-label">Tokens Utilis√©s</div>
            </div>
        </div>
        <button class="btn btn-secondary btn-full" id="reset-stats" style="margin-top: 15px;">
            üîÑ R√©initialiser les Statistiques
        </button>
    </div>

    <!-- Section Aide & Support -->
    <div class="section">
        <h3>‚ùì Aide & Support</h3>
        <div style="font-size: 12px; color: #b9bbbe;">
            Pour toute question ou probl√®me, veuillez consulter la documentation ou contacter le support.
        </div>
        <div class="btn-group" style="margin-top: 15px;">
            <button class="btn btn-secondary" id="open-docs">üìÑ Documentation</button>
            <button class="btn btn-secondary" id="contact-support">üìß Support</button>
        </div>
    </div>
</body>
</html>
